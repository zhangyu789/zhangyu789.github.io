<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>儿童英语乐园</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        /* 桌子背景效果 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at center, rgba(139, 69, 19, 0.1) 0%, transparent 70%),
                linear-gradient(45deg, rgba(160, 82, 45, 0.05) 25%, transparent 25%),
                linear-gradient(-45deg, rgba(160, 82, 45, 0.05) 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, rgba(160, 82, 45, 0.05) 75%),
                linear-gradient(-45deg, transparent 75%, rgba(160, 82, 45, 0.05) 75%);
            background-size: 100% 100%, 20px 20px, 20px 20px, 20px 20px, 20px 20px;
            background-position: 0 0, 0 0, 0 10px, 10px -10px, -10px 0px;
            pointer-events: none;
            z-index: -1;
        }
        
        /* 桌子边缘阴影 */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, transparent 20px),
                linear-gradient(to top, rgba(0,0,0,0.1) 0%, transparent 20px),
                linear-gradient(to right, rgba(0,0,0,0.1) 0%, transparent 20px),
                linear-gradient(to left, rgba(0,0,0,0.1) 0%, transparent 20px);
            pointer-events: none;
            z-index: -1;
        }
        
        /* 幼童友好的主色调 */
        :root {
            --primary-color: #ff6b6b;
            --secondary-color: #4ecdc4;
            --accent-color: #45b7d1;
            --success-color: #96ceb4;
            --warning-color: #feca57;
            --error-color: #ff9ff3;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
        }
        
        /* 幼童友好的侧边栏按钮 */
        #category-nav .category-button {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border: 3px solid transparent;
            border-radius: 20px;
            margin: 8px 0;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        #category-nav .category-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        #category-nav .category-button:hover::before {
            left: 100%;
        }
        #category-nav .category-button:hover {
            background: linear-gradient(135deg, var(--primary-color), #ff8a8a);
            color: white;
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
            border-color: #ff5252;
        }
        #category-nav .active-category {
            background: linear-gradient(135deg, var(--accent-color), #5bc0de);
            color: white;
            box-shadow: 0 6px 20px rgba(69, 183, 209, 0.4);
            border-color: #3498db;
            transform: scale(1.05);
        }
        #category-nav .active-category:hover {
            background: linear-gradient(135deg, #3498db, var(--accent-color));
            transform: scale(1.08);
        }

        /* 拟物化卡片设计 - 散落在桌子上的卡片 */
        .flashcard {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            background: 
                linear-gradient(145deg, #ffffff 0%, #f8f9fa 50%, #e9ecef 100%);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.1),
                0 2px 4px rgba(0,0,0,0.06),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transform: rotate(var(--card-rotation, 0deg)) translateY(var(--card-offset, 0px));
            transform-origin: center;
            contain: content;
            backface-visibility: hidden;
            will-change: transform, box-shadow;
            content-visibility: auto;
            contain-intrinsic-size: 240px 300px;
        }
        
        /* 随机卡片角度和位置 */
        .flashcard:nth-child(odd) {
            --card-rotation: -2deg;
            --card-offset: 2px;
        }
        .flashcard:nth-child(even) {
            --card-rotation: 1.5deg;
            --card-offset: -1px;
        }
        .flashcard:nth-child(3n) {
            --card-rotation: 0.8deg;
            --card-offset: 3px;
        }
        .flashcard:nth-child(4n) {
            --card-rotation: -1.2deg;
            --card-offset: -2px;
        }
        
        .flashcard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            border-radius: 16px 16px 0 0;
        }
        
        .flashcard::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
            border-radius: 16px;
            pointer-events: none;
        }
        
        .flashcard:hover {
            transform: rotate(0deg) translateY(-12px) scale(1.15);
            box-shadow: 
                0 25px 50px rgba(0,0,0,0.3),
                0 12px 24px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,0.9);
            z-index: 10;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .flashcard:active {
            transform: rotate(0deg) translateY(-8px) scale(1.02);
            transition: all 0.1s ease;
        }
        .flashcard .image-container {
            position: relative; /* Needed for download button positioning */
            width: 100%;
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8fafc;
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
            box-shadow: inset 0 1px 3px 0 rgba(0, 0, 0, 0.05);
        }
        .flashcard img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 0.5rem;
        }
        .download-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border-radius: 9999px;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s;
            cursor: pointer;
        }
        .flashcard .image-container:hover .download-btn {
            opacity: 1;
        }
        
        /* 幼童友好的模式切换按钮 */
        .mode-toggle { 
            transition: all 0.3s ease;
            border-radius: 25px;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .mode-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        .mode-toggle:hover::before {
            left: 100%;
        }
        .mode-toggle:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .mode-toggle.active { 
            background: linear-gradient(135deg, var(--accent-color), #5bc0de);
            color: white; 
            box-shadow: 0 6px 20px rgba(69, 183, 209, 0.4);
            border-color: #3498db;
            transform: scale(1.05);
        }
        .mode-toggle.active:hover {
            background: linear-gradient(135deg, #3498db, var(--accent-color));
            transform: scale(1.08);
        }
        /* 拟物化游戏选择卡片 */
        .game-choice-card { 
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); 
            cursor: pointer; 
            border: 1px solid rgba(0,0,0,0.1);
            background: 
                linear-gradient(145deg, #ffffff 0%, #f8f9fa 50%, #e9ecef 100%);
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 120px;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 6px 12px rgba(0,0,0,0.15),
                0 2px 4px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transform: rotate(var(--game-card-rotation, 0deg)) translateY(var(--game-card-offset, 0px));
            contain: content;
            backface-visibility: hidden;
            will-change: transform, box-shadow;
            content-visibility: auto;
            contain-intrinsic-size: 160px 160px;
        }
        
        /* 游戏卡片随机角度 */
        .game-choice-card:nth-child(1) { --game-card-rotation: -1deg; --game-card-offset: 2px; }
        .game-choice-card:nth-child(2) { --game-card-rotation: 1.5deg; --game-card-offset: -1px; }
        .game-choice-card:nth-child(3) { --game-card-rotation: 0.8deg; --game-card-offset: 3px; }
        .game-choice-card:nth-child(4) { --game-card-rotation: -1.2deg; --game-card-offset: -2px; }
        
        .game-choice-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--warning-color), var(--success-color));
            border-radius: 16px 16px 0 0;
        }
        
        .game-choice-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
            border-radius: 16px;
            pointer-events: none;
        }
        .game-choice-card:hover { 
            transform: rotate(0deg) translateY(-8px) scale(1.05);
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.2),
                0 8px 16px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.9);
            z-index: 10;
        }
        .game-choice-card.correct { 
            border-color: var(--success-color); 
            background: linear-gradient(145deg, #d4edda 0%, #c3e6cb 50%, #b8dacc 100%);
            animation: pulse-green 0.5s; 
            transform: rotate(0deg) scale(1.05) translateY(-4px);
            box-shadow: 
                0 12px 24px rgba(34, 197, 94, 0.3),
                0 4px 8px rgba(34, 197, 94, 0.2),
                inset 0 1px 0 rgba(255,255,255,0.9);
        }
        .game-choice-card.incorrect { 
            border-color: var(--error-color); 
            background: linear-gradient(145deg, #f8d7da 0%, #f5c6cb 50%, #f1b0b7 100%);
            animation: shake 0.5s; 
            transform: rotate(0deg) translateY(-2px);
        }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } }
        @keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); } }

        /* --- Loader --- */
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #d1d5db;
            border-bottom-color: #3b82f6;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .loader-text {
            font-size: 0.9rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }
        
        /* --- 儿童友好动画效果 --- */
        @keyframes starPop {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }
        
        @keyframes slideInRight {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0, -8px, 0); }
            70% { transform: translate3d(0, -4px, 0); }
            90% { transform: translate3d(0, -2px, 0); }
        }
        
        @keyframes wiggle {
            0%, 7% { transform: rotateZ(0); }
            15% { transform: rotateZ(-15deg); }
            20% { transform: rotateZ(10deg); }
            25% { transform: rotateZ(-10deg); }
            30% { transform: rotateZ(6deg); }
            35% { transform: rotateZ(-4deg); }
            40%, 100% { transform: rotateZ(0); }
        }
        
        /* 现代化过渡动画 */
        @keyframes popIn {
            0% { 
                transform: scale(0.7) rotate(-5deg); 
                opacity: 0; 
                filter: blur(4px);
            }
            50% { 
                transform: scale(1.1) rotate(2deg); 
                opacity: 0.8; 
                filter: blur(1px);
            }
            100% { 
                transform: scale(1) rotate(0deg); 
                opacity: 1; 
                filter: blur(0px);
            }
        }
        
        @keyframes fadeOutScale {
            0% { 
                transform: scale(1) rotate(0deg); 
                opacity: 1; 
                filter: blur(0px);
            }
            50% { 
                transform: scale(1.1) rotate(5deg); 
                opacity: 0.5; 
                filter: blur(2px);
            }
            100% { 
                transform: scale(0.8) rotate(10deg); 
                opacity: 0; 
                filter: blur(4px);
            }
        }
        
        @keyframes cardFlip {
            0% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(90deg) scale(1.1); }
            100% { transform: rotateY(0deg) scale(1); }
        }
        
        @keyframes cardShuffle {
            0% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(10px) rotate(2deg); }
            50% { transform: translateX(-5px) rotate(-1deg); }
            75% { transform: translateX(5px) rotate(1deg); }
            100% { transform: translateX(0) rotate(0deg); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(1deg); }
        }
        
        @keyframes dealCard {
            0% {
                transform: translate(100vw, 100vh) rotate(180deg) scale(0.5);
                opacity: 0;
                z-index: 1000;
                position: fixed;
            }
            20% {
                transform: translate(80vw, 80vh) rotate(90deg) scale(0.7);
                opacity: 0.3;
                position: fixed;
            }
            40% {
                transform: translate(60vw, 60vh) rotate(45deg) scale(0.8);
                opacity: 0.6;
                position: fixed;
            }
            60% {
                transform: translate(40vw, 40vh) rotate(20deg) scale(0.9);
                opacity: 0.8;
                position: fixed;
            }
            80% {
                transform: translate(20vw, 20vh) rotate(5deg) scale(0.95);
                opacity: 0.9;
                position: fixed;
            }
            100% {
                transform: translate(0, 0) rotate(var(--card-rotation, 0deg)) scale(1);
                opacity: 1;
                z-index: auto;
                position: static;
            }
        }
        
        @keyframes dealCardReverse {
            0% {
                transform: translate(100vw, 100vh) rotate(-180deg) scale(0.5);
                opacity: 0;
                z-index: 1000;
                position: fixed;
            }
            20% {
                transform: translate(80vw, 80vh) rotate(-90deg) scale(0.7);
                opacity: 0.3;
                position: fixed;
            }
            40% {
                transform: translate(60vw, 60vh) rotate(-45deg) scale(0.8);
                opacity: 0.6;
                position: fixed;
            }
            60% {
                transform: translate(40vw, 40vh) rotate(-20deg) scale(0.9);
                opacity: 0.8;
                position: fixed;
            }
            80% {
                transform: translate(20vw, 20vh) rotate(-5deg) scale(0.95);
                opacity: 0.9;
                position: fixed;
            }
            100% {
                transform: translate(0, 0) rotate(var(--card-rotation, 0deg)) scale(1);
                opacity: 1;
                z-index: auto;
                position: static;
            }
        }
        
        @keyframes cardFlip {
            0% {
                transform: translateY(0) rotateY(0deg) scale(1);
            }
            25% {
                transform: translateY(-30px) rotateY(90deg) scale(1.05);
            }
            50% {
                transform: translateY(-50px) rotateY(180deg) scale(1.1);
            }
            75% {
                transform: translateY(-30px) rotateY(270deg) scale(1.05);
            }
            100% {
                transform: translateY(0) rotateY(360deg) scale(1);
            }
        }
        
        @keyframes simpleDeal {
            0% {
                transform: translate(50vw, 50vh) rotate(45deg) scale(0.3);
                opacity: 0;
                z-index: 1000;
            }
            50% {
                transform: translate(25vw, 25vh) rotate(20deg) scale(0.7);
                opacity: 0.7;
                z-index: 1000;
            }
            100% {
                transform: translate(0, 0) rotate(var(--card-rotation, 0deg)) scale(1);
                opacity: 1;
                z-index: auto;
            }
        }
        
        @keyframes flyToWord {
            0% {
                transform: translate(0, 0) scale(1) rotate(0deg);
                opacity: 1;
                z-index: 1000;
            }
            50% {
                transform: translate(var(--fly-x, 0), var(--fly-y, -100px)) scale(0.8) rotate(180deg);
                opacity: 0.8;
                z-index: 1000;
            }
            100% {
                transform: translate(var(--fly-x, 0), var(--fly-y, -100px)) scale(0.6) rotate(360deg);
                opacity: 0;
                z-index: 1000;
            }
        }
        
        @keyframes flyBackToCard {
            0% {
                transform: translate(var(--fly-x, 0), var(--fly-y, -100px)) scale(0.6) rotate(0deg);
                opacity: 0;
                z-index: 1000;
            }
            50% {
                transform: translate(var(--fly-x, 0), var(--fly-y, -50px)) scale(0.8) rotate(180deg);
                opacity: 0.8;
                z-index: 1000;
            }
            100% {
                transform: translate(0, 0) scale(1) rotate(360deg);
                opacity: 1;
                z-index: auto;
            }
        }
        
        .anim-pop-in { 
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .anim-fade-out { 
            animation: fadeOutScale 0.4s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards; 
        }
        .anim-shake { 
            animation: shake 0.6s cubic-bezier(0.36, 0.07, 0.19, 0.97); 
        }
        .anim-flip { 
            animation: cardFlip 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .anim-shuffle { 
            animation: cardShuffle 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94); 
        }
        .anim-float { 
            animation: float 3s ease-in-out infinite; 
        }
        .anim-deal-card { 
            animation: dealCard 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3) !important;
        }
        .anim-deal-card-reverse { 
            animation: dealCardReverse 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3) !important;
        }
        .anim-card-flip { 
            animation: cardFlip 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        .anim-simple-deal { 
            animation: simpleDeal 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        .anim-fly-to-word { 
            animation: flyToWord 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        .anim-fly-back { 
            animation: flyBackToCard 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        /* 彩带动画 */
        @keyframes confettiFall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        .confetti-piece {
            position: fixed;
            top: -12px;
            width: 10px;
            height: 14px;
            border-radius: 2px;
            z-index: 9999;
            animation: confettiFall var(--dur, 2s) linear forwards;
            will-change: transform, opacity;
        }
        
        /* 增强的悬停效果 - 仅在非触摸设备上生效 */
        @media (hover: hover) and (pointer: fine) {
        .flashcard:hover {
            transform: scale(1.15) translateY(-8px);
            box-shadow: 0 25px 50px -5px rgba(0, 0, 0, 0.2), 0 15px 25px -5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .game-choice-card:hover {
            transform: translateY(-8px) scale(1.1);
            box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.15), 0 10px 20px -5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
            .matching-item:hover {
                border-color: #3b82f6;
                transform: translateY(-6px) scale(1.08);
                box-shadow: 0 12px 24px rgba(59, 130, 246, 0.2), 0 6px 12px rgba(59, 130, 246, 0.1);
                transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }
            
            .letter-card:hover {
                transform: translateY(-6px) scale(1.12);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25), 0 8px 16px rgba(0, 0, 0, 0.15);
                background: linear-gradient(135deg, #3b82f6, #2563eb);
                transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }
            
            .word-letter:hover {
                transform: translateY(-2px);
            }
        }
        
        /* 触摸设备上的点击反馈 */
        @media (hover: none) and (pointer: coarse) {
            .flashcard:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            .game-choice-card:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
            
            .matching-item:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            .letter-card:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
        }
        
        /* 拟物化配对连线卡片 - 正方形设计 */
        .matching-item {
            background: 
                linear-gradient(145deg, #ffffff 0%, #f8f9fa 50%, #e9ecef 100%);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 16px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            width: 120px;
            height: 120px;
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 6px 12px rgba(0,0,0,0.15),
                0 2px 4px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transform: rotate(var(--matching-rotation, 0deg)) translateY(var(--matching-offset, 0px));
            margin: 0 auto;
            contain: content;
            backface-visibility: hidden;
            will-change: transform, box-shadow;
            content-visibility: auto;
            contain-intrinsic-size: 120px 120px;
        }
        
        /* 配对卡片随机角度 */
        .matching-item:nth-child(odd) {
            --matching-rotation: -1.5deg;
            --matching-offset: 2px;
        }
        .matching-item:nth-child(even) {
            --matching-rotation: 1.2deg;
            --matching-offset: -1px;
        }
        
        .matching-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 16px 16px 0 0;
        }
        
        .matching-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
            border-radius: 16px;
            pointer-events: none;
        }
        .matching-item:hover {
            transform: rotate(0deg) translateY(-8px) scale(1.05);
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.2),
                0 8px 16px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.9);
            z-index: 10;
        }
        
        .matching-item.selected {
            border-color: var(--accent-color);
            background: linear-gradient(145deg, #e3f2fd 0%, #bbdefb 50%, #90caf9 100%);
            box-shadow: 
                0 0 0 4px rgba(69, 183, 209, 0.3),
                0 12px 24px rgba(69, 183, 209, 0.2),
                inset 0 1px 0 rgba(255,255,255,0.9);
            transform: rotate(0deg) scale(1.05) translateY(-4px);
        }
        .matching-item.correct {
            border-color: var(--success-color);
            background: linear-gradient(145deg, #d4edda 0%, #c3e6cb 50%, #b8dacc 100%);
            animation: pulse-green 0.5s;
            transform: rotate(0deg) scale(1.02) translateY(-2px);
            box-shadow: 
                0 12px 24px rgba(34, 197, 94, 0.3),
                0 4px 8px rgba(34, 197, 94, 0.2),
                inset 0 1px 0 rgba(255,255,255,0.9);
        }
        .matching-item.incorrect {
            border-color: var(--error-color);
            background: linear-gradient(145deg, #f8d7da 0%, #f5c6cb 50%, #f1b0b7 100%);
            animation: shake 0.5s;
            transform: rotate(0deg) translateY(-2px);
        }
        .matching-word {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            text-align: center;
            line-height: 1.2;
            word-break: break-word;
            padding: 0.5rem;
        }
        .matching-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 0.5rem;
        }
        .matching-line {
            stroke: #3b82f6;
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 5,5;
            animation: dash 1s linear infinite;
        }
        .matching-line.correct {
            stroke: #22c55e;
            stroke-dasharray: none;
        }
        .matching-line.incorrect {
            stroke: #ef4444;
            stroke-dasharray: none;
        }
        @keyframes dash {
            to { stroke-dashoffset: -10; }
        }
        
        /* --- 听写训练样式 --- */
        .dictation-feedback {
            padding: 1rem;
            border-radius: 0.75rem;
            margin: 1rem 0;
            font-weight: 600;
        }
        .dictation-feedback.correct {
            background-color: #f0fdf4;
            color: #166534;
            border: 2px solid #22c55e;
        }
        .dictation-feedback.incorrect {
            background-color: #fef2f2;
            color: #991b1b;
            border: 2px solid #ef4444;
        }
        .dictation-feedback.show-answer {
            background-color: #eff6ff;
            color: #1e40af;
            border: 2px solid #3b82f6;
        }
        #dictation-input {
            font-family: 'Inter', monospace;
            letter-spacing: 0.1em;
        }
        #dictation-input:focus {
            transform: scale(1.02);
            transition: transform 0.2s ease;
        }
        
        /* 拟物化字母卡片样式 */
        .letter-card {
            width: 60px;
            height: 60px;
            background: 
                linear-gradient(145deg, #60a5fa 0%, #3b82f6 50%, #1d4ed8 100%);
            color: white;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 
                0 8px 16px rgba(59, 130, 246, 0.3),
                0 4px 8px rgba(59, 130, 246, 0.2),
                inset 0 1px 0 rgba(255,255,255,0.3),
                inset 0 -1px 0 rgba(0,0,0,0.1);
            user-select: none;
            position: relative;
            transform: rotate(var(--letter-rotation, 0deg)) translateY(var(--letter-offset, 0px));
            contain: content;
            backface-visibility: hidden;
            will-change: transform, box-shadow;
        }
        
        /* 字母卡片随机角度 */
        .letter-card:nth-child(odd) {
            --letter-rotation: -2deg;
            --letter-offset: 1px;
        }
        .letter-card:nth-child(even) {
            --letter-rotation: 1.5deg;
            --letter-offset: -1px;
        }
        .letter-card:nth-child(3n) {
            --letter-rotation: 0.8deg;
            --letter-offset: 2px;
        }
        .letter-card:nth-child(4n) {
            --letter-rotation: -1.2deg;
            --letter-offset: -1px;
        }
        
        .letter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.2) 50%, transparent 100%);
            border-radius: 16px;
            pointer-events: none;
        }
        .letter-card:hover {
            transform: rotate(0deg) translateY(-6px) scale(1.1);
            box-shadow: 
                0 16px 32px rgba(59, 130, 246, 0.4),
                0 8px 16px rgba(59, 130, 246, 0.3),
                inset 0 1px 0 rgba(255,255,255,0.4),
                inset 0 -1px 0 rgba(0,0,0,0.1);
            z-index: 10;
        }
        
        .letter-card:active {
            transform: rotate(0deg) translateY(-3px) scale(1.05);
            transition: all 0.1s ease;
        }
        
        .letter-card.used {
            background: linear-gradient(145deg, #c7d2fe 0%, #93c5fd 50%, #7c3aed 100%);
            cursor: not-allowed;
            opacity: 0.6;
            transform: rotate(0deg) scale(0.95);
            box-shadow: 
                0 4px 8px rgba(124, 58, 237, 0.2),
                0 2px 4px rgba(124, 58, 237, 0.1),
                inset 0 1px 0 rgba(255,255,255,0.2);
        }
        .letter-card.used:hover {
            transform: rotate(0deg) scale(0.95);
            box-shadow: 
                0 4px 8px rgba(124, 58, 237, 0.2),
                0 2px 4px rgba(124, 58, 237, 0.1),
                inset 0 1px 0 rgba(255,255,255,0.2);
        }
        
        /* 单词显示区域样式 */
        .word-letter {
            display: inline-block;
            min-width: 40px;
            height: 50px;
            background: white;
            border: 2px solid #3b82f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            margin: 0 2px;
            transition: all 0.2s ease;
            contain: content;
            backface-visibility: hidden;
        }

        /* 系统偏好：减少动态效果 */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
                scroll-behavior: auto !important;
            }
        }
        .word-letter.filled { box-shadow: 0 4px 10px rgba(59, 130, 246, 0.2); }
        .word-letter.pop { animation: popIn 0.25s ease-out; }
        .word-letter:empty {
            border-color: #d1d5db;
            background: #f9fafb;
        }
        .word-letter:empty::after {
            content: '_';
            color: #9ca3af;
        }
        
    </style>
</head>
<body>
    <div class="relative h-screen md:flex">
        <!-- Mobile Menu Backdrop -->
        <div id="menu-backdrop" class="fixed inset-0 bg-black/50 z-20 hidden md:hidden"></div>

        <!-- Sidebar -->
        <nav id="category-nav" class="bg-white border-r border-gray-200 fixed inset-y-0 left-0 z-30 w-64 p-4 space-y-2 transform -translate-x-full transition-transform duration-300 ease-in-out md:relative md:translate-x-0 md:h-screen md:overflow-y-auto">
             <h2 class="px-2 text-2xl font-bold text-sky-600 mb-4">主题分类</h2>
            <!-- 类别按钮将由JS动态生成 -->
        </nav>

        <!-- Main Content -->
        <div class="flex-1 h-screen overflow-y-auto">
            <header class="bg-white/80 backdrop-blur-sm sticky top-0 z-10 p-4 flex items-center shadow-sm">
                <!-- Hamburger button for mobile -->
                <button id="menu-toggle" class="md:hidden p-2 rounded-md text-gray-600 hover:bg-gray-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
                <h1 class="text-xl font-bold text-sky-600 md:hidden ml-4">儿童英语乐园</h1>
            </header>

            <div class="p-4 md:p-8">
                <header class="text-center mb-8">
                    <h1 class="hidden md:block text-4xl md:text-5xl font-bold bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 bg-clip-text text-transparent">
                        🌟 儿童英语乐园 🌟
                    </h1>
                    <p id="app-subtitle" class="text-lg text-gray-600 mt-2 font-medium">选择类别，点击卡片学习单词、听发音和看例句！</p>
                    <div class="mt-4 flex justify-center items-center gap-2 text-sm text-gray-500">
                        <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full">💡 点击卡片听发音</span>
                        <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full">🎯 选择正确图片</span>
                        <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full">🔗 配对连线游戏</span>
                    </div>
                </header>
                 
                <div class="flex justify-center mb-6 bg-gradient-to-r from-pink-100 via-purple-100 to-blue-100 rounded-full p-2 max-w-3xl mx-auto shadow-lg">
                    <button id="mode-flashcards" class="mode-toggle w-1/4 p-3 rounded-full font-semibold text-gray-700 text-sm flex flex-col items-center gap-1">
                        <span class="text-lg">📚</span>
                        <span>卡片认读</span>
                    </button>
                    <button id="mode-game" class="mode-toggle w-1/4 p-3 rounded-full font-semibold text-gray-700 text-sm flex flex-col items-center gap-1">
                        <span class="text-lg">🎯</span>
                        <span>看词选图</span>
                    </button>
                    <button id="mode-matching" class="mode-toggle w-1/4 p-3 rounded-full font-semibold text-gray-700 text-sm flex flex-col items-center gap-1">
                        <span class="text-lg">🔗</span>
                        <span>配对连线</span>
                    </button>
                    <button id="mode-dictation" class="mode-toggle w-1/4 p-3 rounded-full font-semibold text-gray-700 text-sm flex flex-col items-center gap-1">
                        <span class="text-lg">✏️</span>
                        <span>听写训练</span>
                    </button>
                </div>

                <main id="flashcard-container" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6">
                    <!-- 闪卡将由JS动态生成 -->
                </main>
        
                <div id="game-container" class="hidden text-center max-w-4xl mx-auto">
                    <div id="game-question-area" class="mb-8 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-3xl p-6 shadow-lg">
                        <div class="flex items-center justify-center gap-3 mb-4">
                            <span class="text-2xl">🎵</span>
                            <p class="text-xl text-gray-700 font-semibold">听声音，选择正确的图片：</p>
                            <span class="text-2xl">👂</span>
                        </div>
                        <div id="game-question-word" class="text-5xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent my-4 cursor-pointer hover:scale-110 transition-transform p-4 bg-white rounded-2xl shadow-md" title="点击重新播放">
                            <div class="text-sm text-gray-500 mb-2">点击单词听发音</div>
                        </div>
                    </div>
                    <div id="game-choices-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6">
                         <!-- 游戏选项将由JS动态生成 -->
                    </div>
                </div>

                <!-- 配对连线容器 -->
                <div id="matching-container" class="hidden max-w-6xl mx-auto">
                    <div class="text-center mb-8 bg-gradient-to-r from-green-50 to-blue-50 rounded-3xl p-6 shadow-lg">
                        <div class="flex items-center justify-center gap-3 mb-4">
                            <span class="text-2xl">🔗</span>
                            <p class="text-xl text-gray-700 font-semibold">将左侧的单词与右侧对应的图片连线</p>
                            <span class="text-2xl">🎯</span>
                        </div>
                        <div class="flex justify-center items-center gap-6 flex-wrap">
                            <div class="flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-md">
                                <span class="text-lg">📊</span>
                                <span class="text-sm text-gray-600">已连线: </span>
                                <span id="matching-progress" class="text-lg font-bold text-green-600">0</span>
                                <span class="text-gray-400">/</span>
                                <span id="matching-total" class="text-lg font-bold text-blue-600">0</span>
                            </div>
                            <button id="matching-check" class="px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-full hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center gap-2">
                                <span>✅</span>
                                <span>检查答案</span>
                            </button>
                            <button id="matching-reset" class="px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-full hover:from-gray-600 hover:to-gray-700 transition-all shadow-lg flex items-center gap-2">
                                <span>🔄</span>
                                <span>重新开始</span>
                            </button>
                        </div>
                    </div>
                    <div class="flex gap-8">
                        <div class="flex-1 bg-gradient-to-b from-pink-50 to-purple-50 rounded-3xl p-6 shadow-lg">
                            <div class="flex items-center justify-center gap-2 mb-6">
                                <span class="text-2xl">📝</span>
                                <h3 class="text-2xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent">单词</h3>
                                <span class="text-2xl">📝</span>
                            </div>
                            <div id="matching-words" class="flex flex-col items-center space-y-4">
                                <!-- 单词列表将由JS动态生成 -->
                            </div>
                        </div>
                        <div class="flex-1 bg-gradient-to-b from-blue-50 to-cyan-50 rounded-3xl p-6 shadow-lg">
                            <div class="flex items-center justify-center gap-2 mb-6">
                                <span class="text-2xl">🖼️</span>
                                <h3 class="text-2xl font-bold bg-gradient-to-r from-blue-500 to-cyan-600 bg-clip-text text-transparent">图片</h3>
                                <span class="text-2xl">🖼️</span>
                            </div>
                            <div id="matching-images" class="flex flex-col items-center space-y-4">
                                <!-- 图片列表将由JS动态生成 -->
                            </div>
                        </div>
                    </div>
                    <svg id="matching-svg" class="absolute inset-0 pointer-events-none" style="z-index: 10;">
                        <!-- 连线将由JS动态生成 -->
                    </svg>
                </div>

                <!-- 听写训练容器 -->
                <div id="dictation-container" class="hidden text-center max-w-5xl mx-auto">
                    <div class="mb-8 bg-gradient-to-r from-purple-50 to-pink-50 rounded-3xl p-8 shadow-lg">
                        <div class="flex items-center justify-center gap-3 mb-6">
                            <span class="text-2xl">✏️</span>
                            <p class="text-xl text-gray-700 font-semibold">听声音，用下方的字母卡片拼出单词</p>
                            <span class="text-2xl">🎧</span>
                        </div>
                        <div class="flex justify-center items-center gap-6 mb-8 flex-wrap">
                            <button id="dictation-play" class="px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg flex items-center gap-3 text-lg font-semibold">
                                <span class="text-2xl">🔊</span>
                                <span>播放单词</span>
                            </button>
                            <div class="flex items-center gap-2 bg-white px-6 py-3 rounded-full shadow-md">
                                <span class="text-lg">📊</span>
                                <span class="text-sm text-gray-600">剩余: </span>
                                <span id="dictation-remaining" class="text-xl font-bold text-purple-600">0</span>
                            </div>
                        </div>
                        
                        <!-- 单词输入区域 -->
                        <div class="mb-8 bg-white rounded-2xl p-6 shadow-md">
                            <div class="flex items-center justify-center gap-2 mb-4">
                                <span class="text-lg">📝</span>
                                <div class="text-lg text-gray-700 font-semibold">拼出的单词：</div>
                                <span class="text-lg">📝</span>
                            </div>
                            <div id="dictation-word-display" class="min-h-[80px] w-full max-w-3xl mx-auto px-6 py-4 text-3xl font-bold text-center border-3 border-dashed border-purple-300 rounded-2xl bg-gradient-to-r from-purple-50 to-pink-50 flex items-center justify-center gap-3 shadow-inner">
                                <span class="text-gray-400 text-lg">点击下方字母卡片拼出单词</span>
                                <span class="text-2xl">👆</span>
                            </div>
                        </div>
                        
                        <!-- 字母卡片区域 -->
                        <div class="mb-8 bg-white rounded-2xl p-6 shadow-md">
                            <div class="flex items-center justify-center gap-2 mb-6">
                                <span class="text-2xl">🔤</span>
                                <div class="text-xl text-gray-700 font-semibold">字母卡片：</div>
                                <span class="text-2xl">🔤</span>
                            </div>
                            <div id="dictation-letter-cards" class="flex flex-wrap justify-center gap-4 max-w-5xl mx-auto">
                                <!-- 字母卡片将由JS动态生成 -->
                            </div>
                        </div>
                        
                        <!-- 操作按钮 -->
                        <div class="flex justify-center gap-6 flex-wrap">
                            <button id="dictation-clear" class="px-8 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-full hover:from-yellow-600 hover:to-orange-600 transition-all shadow-lg flex items-center gap-2 text-lg font-semibold">
                                <span>🗑️</span>
                                <span>清空</span>
                            </button>
                            <button id="dictation-submit" class="px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-full hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg flex items-center gap-2 text-lg font-semibold">
                                <span>✅</span>
                                <span>提交</span>
                            </button>
                            <button id="dictation-skip" class="px-8 py-3 bg-gradient-to-r from-gray-500 to-slate-500 text-white rounded-full hover:from-gray-600 hover:to-slate-600 transition-all shadow-lg flex items-center gap-2 text-lg font-semibold">
                                <span>⏭️</span>
                                <span>跳过</span>
                            </button>
                        </div>
                    </div>
                    <div id="dictation-feedback" class="mb-6">
                        <!-- 反馈信息将由JS动态生成 -->
                    </div>
                    <div id="dictation-progress" class="text-sm text-gray-500">
                        <!-- 进度信息将由JS动态生成 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>